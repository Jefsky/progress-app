# 局域网部署指南

本文档提供了在局域网中部署项目进度管理系统的详细步骤。

## 准备工作

1. 确保您的计算机已安装 Node.js（推荐版本 14.x 或更高）
2. 确保您的计算机在局域网中有一个固定的 IP 地址
3. 确保局域网中的防火墙允许 3000 端口（API 服务器）和 8080 端口（Web 服务器）的访问

## 部署步骤

### 1. 配置服务器 IP 地址

编辑 `src/config.js` 文件，将 `LAN_CONFIG` 中的 `API_URL` 修改为您的实际 IP 地址：

```javascript
const LAN_CONFIG = {
  API_URL: 'http://192.168.1.100:3000' // 替换为您的实际 IP 地址
};
```

### 2. 准备数据库文件

如果是首次使用，需要创建 db.json 文件：

```bash
cp db.json.example db.json
```

### 3. 安装依赖

```bash
npm install
```

### 4. 构建并启动应用（推荐方法）

使用以下命令构建前端应用并启动两个服务器（API 服务器和静态文件服务器）：

```bash
npm run deploy:lan
```

这将执行以下操作：
- 使用局域网配置构建前端应用
- 启动 JSON Server API 服务器（端口 3000）
- 启动静态文件服务器（端口 8080）

### 5. 访问应用

构建完成后，您可以通过以下方式访问应用：

- 前端应用：
  - 本地访问：http://localhost:8080
  - 局域网访问：http://[您的IP地址]:8080

- API 服务器：
  - 本地访问：http://localhost:3000
  - 局域网访问：http://[您的IP地址]:3000

## 其他部署方法

### 仅启动 API 服务器

如果您只需要启动 API 服务器：

```bash
npm run server
```

### 仅启动静态文件服务器

如果您已经构建了前端应用，只需要启动静态文件服务器：

```bash
npm run serve:static
```

### 旧版部署方法

使用单一服务器部署（不推荐）：

```bash
npm run start:lan
```

## 故障排除

### 无法从其他设备访问

1. 确认您的 IP 地址是否正确
2. 检查防火墙设置，确保允许 3000 和 8080 端口的访问
3. 尝试在服务器上使用 `ping` 命令测试网络连接

### 数据无法保存

1. 确认 db.json 文件存在且有写入权限
2. 检查服务器控制台是否有错误信息

### 前端无法连接到 API

1. 确认 `src/config.js` 中的 API_URL 是否正确
2. 确认 API 服务器是否正在运行
3. 检查浏览器控制台是否有跨域错误

## 注意事项

- 此部署方法适用于小型团队在局域网内部使用
- 不建议将此配置用于公共互联网访问，因为缺乏适当的安全措施
- 对于生产环境，建议使用 Nginx 或 Apache 作为前端的 Web 服务器，并添加适当的安全配置
